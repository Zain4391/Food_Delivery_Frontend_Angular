<label class="flex flex-col gap-1.5 group">
  @if (label()) {
    <span class="text-[#181211] dark:text-white text-sm font-bold leading-normal">{{ label() }}</span>
  }
  
  <!-- Dropdown Container -->
  <div class="relative dropdown-container">
    <button
      type="button"
      (click)="toggleDropdown()"
      class="flex w-full rounded-xl text-[#181211] dark:text-white dark:bg-[#2a1a17] focus:outline-0 focus:ring-2 focus:ring-primary/20 border border-[#e6dddb] dark:border-gray-700 bg-background-light h-14 text-base font-medium transition-all duration-200 items-center justify-between"
      [class.pl-12]="icon()"
      [class.pl-4]="!icon()"
      [class.pr-4]="true"
      [class.border-red-500]="disabled()"
    >
      <!-- Icon -->
      @if (icon()) {
        <lucide-angular 
          [img]="icon()!" 
          class="text-[#896861] group-focus-within:text-primary transition-colors absolute left-4" 
          [size]="24"
        ></lucide-angular>
      }
      
      <!-- Selected Value or Placeholder -->
      <span 
        [class.text-[#896861]/70]="!selectedValue()"
        [class.text-[#181211]]="selectedValue()"
        [class.dark:text-white]="selectedValue()"
        class="text-base font-medium"
      >
        {{ getSelectedLabel() }}
      </span>
      
      <!-- Dropdown Arrow -->
      <lucide-angular 
        [img]="ChevronDown" 
        [class.rotate-180]="isOpen()"
        class="text-[#896861] transition-transform duration-200" 
        [size]="20"
      ></lucide-angular>
    </button>
    
    <!-- Dropdown Menu -->
    @if (isOpen()) {
      <div class="absolute z-10 w-full mt-2 bg-white dark:bg-[#2a1a17] border border-[#e6dddb] dark:border-gray-700 rounded-xl shadow-lg overflow-hidden">
        <ul class="max-h-60 overflow-y-auto">
          @for (option of options(); track option.value) {
            <li>
              <button
                type="button"
                (click)="selectOption(option)"
                [class.bg-primary/10]="selectedValue() === option.value"
                class="w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center gap-3"
              >
                @if (option.icon) {
                  <lucide-angular 
                    [img]="option.icon" 
                    class="text-primary" 
                    [size]="20"
                  ></lucide-angular>
                }
                <span 
                  [class.text-primary]="selectedValue() === option.value"
                  [class.font-bold]="selectedValue() === option.value"
                  class="text-base text-[#181211] dark:text-white font-medium"
                >
                  {{ option.label }}
                </span>
              </button>
            </li>
          }
        </ul>
      </div>
    }
  </div>
</label>
